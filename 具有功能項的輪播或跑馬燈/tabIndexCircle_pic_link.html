<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>輪播-純圖片輪播：使用索引標籤</title>
    <style>
        :root {
            --card-w: min(100%, 960px);
            --slide-h: clamp(260px, 45vw, 520px);
            --brand: #0a63ff;
            --ink: #111;
            --surface: #ffffff;
            --line: #ccd2dd;
            --radius: 12px;
        }

        html,
        body {
            height: 100%
        }

        body {
            margin: 0;
            padding: 0;
            font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans TC", sans-serif;
            color: var(--ink);
            background:
                radial-gradient(1200px 600px at 10% -20%, #e8f0ff 0, transparent 60%),
                radial-gradient(1200px 600px at 110% 120%, #eaf7ef 0, transparent 60%),
                #f6f7fb;
            display: flex;
            align-items: flex-start;
            justify-content: center;
        }

        .skip-link {
            position: absolute;
            left: 12px;
            top: 0;
            transform: translateY(-150%);
            padding: 12px 16px;
            background: #fff;
            border: 2px solid var(--brand);
            border-radius: var(--radius);
            text-decoration: none;
            color: var(--ink);
            font-weight: 600;
            z-index: 1000;
        }

        .skip-link:focus,
        .skip-link:focus-visible {
            transform: translateY(12px);
            outline: none;
        }

        h1 { text-align: center; }

        *:focus-visible {
            outline: 3px solid #1b5ae0;
            outline-offset: 2px;
            box-shadow:
                0 0 0 4px #fff,
                0 0 0 6px #1b5ae0;
            border-radius: 6px;
        }

        .carousel-tablist {
            width: var(--card-w);
            margin: 0 auto;
            background: #fff;
            border-radius: 16px;
            overflow: hidden;
            box-shadow:
                0 12px 30px rgba(10, 30, 60, .08),
                0 2px 6px rgba(10, 30, 60, .06);
            border: 1px solid rgba(20, 20, 20, .06);
        }

        .carousel-tablist .carousel-inner {
            position: relative;
        }

        .carousel-tablist .carousel-items {
            padding: 0;
        }

        .carousel-tablist .carousel-item {
            display: none;
            position: relative;
            width: 100%;
            height: var(--slide-h);
            overflow: hidden;
            background: #ddd;
        }

        .carousel-tablist .carousel-item.active {
            display: block;
        }

        .carousel-tablist .carousel-item .carousel-image a img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            filter: saturate(1.02) contrast(1.02);
            transform: scale(1.001);
        }

        .carousel-tablist .carousel-item .carousel-caption {
            position: absolute;
            inset: auto 0 0 0;
            padding: 22px min(4vw, 24px) 24px;
            color: #fff;
            text-align: left;
            background: linear-gradient(180deg, rgba(0, 0, 0, 0)0%, rgba(0, 0, 0, .25)30%, rgba(0, 0, 0, .55)65%, rgba(0, 0, 0, .75)100%);
        }

        .carousel-tablist .carousel-item .carousel-caption h3 {
            margin: 0 0 8px;
            font-size: clamp(18px, 2.2vw, 24px);
            line-height: 1.25;
        }

        .carousel-tablist .carousel-item .carousel-caption p {
            margin: 0;
            font-size: clamp(14px, 1.6vw, 16px);
            line-height: 1.6;
            opacity: .95;
        }

        .carousel-tablist .carousel-item .carousel-caption a {
            color: #fff;
            text-decoration: none;
            border-radius: 8px;
            padding: 2px 4px;
        }

        .carousel-tablist .carousel-item .carousel-caption a:hover {
            text-decoration: underline;
        }

        .carousel-tablist .controls {
            position: absolute;
            top: 12px;
            left: 0;
            right: 0;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 0 16px;
            pointer-events: none;
        }

        .carousel-tablist .rotation,
        .carousel-tablist [role="tablist"] {
            pointer-events: auto;
        }

        .carousel-tablist .rotation {
            height: 30px;
            padding: 0;
            background: rgba(0, 0, 0, .40);
            border: 1px solid rgba(255, 255, 255, .35);
            border-radius: 999px;
            display: grid;
            place-items: center;
            transition: transform .12s ease, background .2s ease, border-color .2s ease;
        }

        .carousel-tablist .rotation:hover,
        .carousel-tablist .rotation:focus-visible {
            background: rgba(10, 99, 255, 1);
            border-color: #fff;
            outline: none;
            box-shadow: none;
        }

        .carousel-tablist .svg-play .background,
        .carousel-tablist .svg-play .border {
            fill: transparent;
            stroke: transparent;
        }

        .carousel-tablist .svg-play .pause,
        .carousel-tablist .svg-play .play {
            fill: transparent;
            stroke: transparent;
        }

        .carousel-tablist .svg-play .pause {
            stroke-width: 4;
        }

        .carousel-tablist .svg-play .play {
            stroke-width: 1;
        }

        .carousel-tablist .rotation.pause .svg-play .pause {
            stroke: #fff;
        }

        .carousel-tablist .rotation.play .svg-play .play {
            fill: #fff;
            stroke: #fff;
        }

        .carousel-tablist .tab-wrapper {
            flex: 1 1 auto;
            height: 30px;
            text-align: center;
        }

        .carousel-tablist [role="tablist"] {
            background: rgba(0, 0, 0, .55);
            border: 1px solid rgba(255, 255, 255, .35);
            border-radius: 999px;
            height: 30px;
            display: inline-flex;
            align-items: center;
            gap: 2px;
            padding: 2px 6px;
            margin-left: auto;
        }

        .carousel-tablist [role="tab"] {
            width: 34px;
            height: 34px;
            background: transparent;
            border: none;
            padding: 0;
            margin: 0;
            border-radius: 999px;
            cursor: pointer;
        }

        .carousel-tablist [role="tab"]:focus-visible {
            outline: none;
            box-shadow: none;
        }

        .carousel-tablist [role="tab"] circle.tab-background {
            fill: rgba(255, 255, 255, .12);
            stroke: rgba(255, 255, 255, .12);
        }

        .carousel-tablist [role="tab"] circle.tab {
            fill: transparent;
            stroke: #fff;
            stroke-width: 2px;
            opacity: .7;
        }

        .carousel-tablist [role="tab"][aria-selected="true"] circle.tab {
            fill: #fff;
            stroke: #fff;
            opacity: 1;
        }

        .carousel-tablist [role="tab"]:hover circle.tab-background,
        .carousel-tablist [role="tab"]:focus-visible circle.tab-background {
            fill: #fff;
            opacity: 1;
        }

        .carousel-tablist [role="tab"]:hover circle.tab,
        .carousel-tablist [role="tab"]:focus-visible circle.tab {
            stroke: var(--brand);
        }

        .carousel-tablist [role="tab"] circle.border {
            display: none;
        }

        .carousel-tablist [role="tablist"].focus {
            background: rgba(10, 99, 255, .95);
            border-color: transparent;
        }

        .carousel-tablist-moreaccessible {
            border-radius: 16px;
            border: 1px solid rgba(20, 20, 20, .08);
            box-shadow: 0 10px 22px rgba(10, 30, 60, .05), 0 1px 3px rgba(10, 30, 60, .06);
        }

        .carousel-tablist-moreaccessible .carousel-item {
            height: auto;
            padding: 5px;
        }

        .carousel-tablist .carousel-items.focus {
            border-radius: 16px;
            padding: 2px;
            border: solid 3px var(--brand);
        }

        .carousel-tablist-moreaccessible .carousel-item .carousel-caption {
            position: static;
            background: #fff;
            color: #111;
            padding: 14px 16px 18px;
            border-top: 1px solid rgba(20, 20, 20, .06);
        }

        .carousel-tablist-moreaccessible .carousel-item .carousel-caption a {
            color: var(--ink);
            text-decoration: underline;
        }
    </style>
</head>

<body>
    <a href="#mainh1" class="skip-link">跳到主要內容區</a>
    <main>
        <h1 id="mainh1">輪播-純圖片輪播：使用索引標籤</h1>
        <section id="myCarousel" class="carousel-tablist" aria-roledescription="輪播" aria-label="精選電視節目">
            <div class="carousel-inner">
                <div class="controls">
                    <button class="rotation" type="button" aria-label="停止輪播">
                        <svg width="42" height="34" version="1.1" xmlns="http://www.w3.org/2000/svg" class="svg-play">
                            <rect class="background" x="2" y="2" rx="5" ry="5" width="38" height="24"></rect>
                            <rect class="border" x="4" y="4" rx="5" ry="5" width="34" height="20"></rect>
                            <polygon class="pause" points="17 8 17 20"></polygon>
                            <polygon class="pause" points="24 8 24 20"></polygon>
                            <polygon class="play" points="15 8 15 20 27 14"></polygon>
                        </svg>
                    </button>

                    <div class="tab-wrapper">
                        <div role="tablist" aria-label="輪播圖組">
                            <button id="carousel-tab-1" type="button" role="tab" aria-label="輪播 1" aria-selected="true"
                                aria-controls="carousel-item-1">
                                <svg width="34" height="34" version="1.1" xmlns="http://www.w3.org/2000/svg">
                                    <circle class="border" cx="16" cy="17" r="10"></circle>
                                    <circle class="tab-background" cx="16" cy="17" r="8"></circle>
                                    <circle class="tab" cx="16" cy="17" r="6"></circle>
                                </svg>
                            </button>
                            <button id="carousel-tab-2" type="button" role="tab" tabindex="-1" aria-label="輪播 2"
                                aria-selected="false" aria-controls="carousel-item-2">
                                <svg width="34" height="34" version="1.1" xmlns="http://www.w3.org/2000/svg">
                                    <circle class="border" cx="16" cy="17" r="10"></circle>
                                    <circle class="tab-background" cx="16" cy="17" r="8"></circle>
                                    <circle class="tab" cx="16" cy="17" r="6"></circle>
                                </svg>
                            </button>
                            <button id="carousel-tab-3" type="button" role="tab" tabindex="-1" aria-label="輪播 3"
                                aria-selected="false" aria-controls="carousel-item-3">
                                <svg width="34" height="34" version="1.1" xmlns="http://www.w3.org/2000/svg">
                                    <circle class="border" cx="16" cy="17" r="10"></circle>
                                    <circle class="tab-background" cx="16" cy="17" r="8"></circle>
                                    <circle class="tab" cx="16" cy="17" r="6"></circle>
                                </svg>
                            </button>
                            <button id="carousel-tab-4" type="button" role="tab" tabindex="-1" aria-label="輪播 4"
                                aria-selected="false" aria-controls="carousel-item-4">
                                <svg width="34" height="34" version="1.1" xmlns="http://www.w3.org/2000/svg">
                                    <circle class="border" cx="16" cy="17" r="10"></circle>
                                    <circle class="tab-background" cx="16" cy="17" r="8"></circle>
                                    <circle class="tab" cx="16" cy="17" r="6"></circle>
                                </svg>
                            </button>
                            <button id="carousel-tab-5" type="button" role="tab" tabindex="-1" aria-label="輪播 5"
                                aria-selected="false" aria-controls="carousel-item-5">
                                <svg width="34" height="34" version="1.1" xmlns="http://www.w3.org/2000/svg">
                                    <circle class="border" cx="16" cy="17" r="10"></circle>
                                    <circle class="tab-background" cx="16" cy="17" r="8"></circle>
                                    <circle class="tab" cx="16" cy="17" r="6"></circle>
                                </svg>
                            </button>
                            <button id="carousel-tab-6" type="button" role="tab" tabindex="-1" aria-label="輪播 6"
                                aria-selected="false" aria-controls="carousel-item-6">
                                <svg width="34" height="34" version="1.1" xmlns="http://www.w3.org/2000/svg">
                                    <circle class="border" cx="16" cy="17" r="10"></circle>
                                    <circle class="tab-background" cx="16" cy="17" r="8"></circle>
                                    <circle class="tab" cx="16" cy="17" r="6"></circle>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <div id="myCarousel-items" class="carousel-items playing" aria-live="off">
                    <div class="carousel-item active" id="carousel-item-1" role="tabpanel" aria-roledescription="slide"
                        aria-label="六之一">
                        <div class="carousel-image">
                            <a href="https://www.klook.com/zh-TW/activity/109967-amsterdam-highlights-history-2-hour-walking-tour/" id="carousel-image-1">
                                <img src="../images/amsterdamslide__800x600.jpg" alt="阿姆斯特丹徒步之旅" />
                            </a>
                        </div>
                        <div class="carousel-caption">
                            <h2><a href="https://www.youtube.com/watch?v=2bjv3-_2NL4">動態歐洲：阿姆斯特丹、布拉格、柏林</a></h2>
                            <p>
                                <span class="contrast">3月3日星期二晚上7點在電視上播出</span>
                            </p>
                        </div>
                    </div>

                    <div class="carousel-item" id="carousel-item-2" role="tabpanel" aria-roledescription="slide"
                        aria-label="六之二">
                        <div class="carousel-image">
                            <a href="https://lalalovetravel.com/articles/352-england-cornwall" id="carousel-image-2">
                                <img src="../images/lands-endslide__800x600.jpg" alt="康沃爾郡的天涯海角" />
                            </a>
                        </div>

                        <div class="carousel-caption">
                            <h2>
                                <a href="https://ahhhzz.com/eurostar/"> 前往西南英國和巴黎 </a>
                            </h2>

                            <div>
                                <p><span class="contrast">9月14日至9月24日或27日</span></p>
                            </div>
                        </div>
                    </div>

                    <div class="carousel-item" id="carousel-item-3" role="tabpanel" aria-roledescription="slide"
                        aria-label="六之三">
                        <div class="carousel-image">
                            <a href="https://zh.freepik.com/premium%E5%9C%96%E7%89%87/mother-daughter-playing-laptop-together-living-room-home-happy-loving-family-concept_21928881.htm" id="carousel-image-3">
                                <img src="../images/trustslide-2__800x600.jpg" alt="媽媽和女兒在筆記型電腦上玩丹尼爾老虎遊戲" />
                            </a>
                        </div>

                        <div class="carousel-caption">
                            <h2>
                                <a href="https://www.ptskids.tw/?gad_source=1&gad_campaignid=17785803973&gbraid=0AAAAAox0ZUex1u-dpX5oJAUu7WTq9UOCz&gclid=Cj0KCQjw-4XFBhCBARIsAAdNOkvNiaRpC6T-uT6kCBQIxBT-h5FO8KEzsydeNFPe-lFFDSBrLTUOu7AaAu7jEALw_wcB"> 公共電視的優質兒童節目 </a>
                            </h2>

                            <div></div>
                        </div>
                    </div>

                    <div class="carousel-item" id="carousel-item-4" role="tabpanel" aria-roledescription="slide"
                        aria-label="六之四">
                        <div class="carousel-image">
                            <a href="https://www.w3.org/WAI/content-images/wai-aria-practices/patterns/carousel/examples/images/foyleswarslide__800x600.jpg" id="carousel-image-4" title="點擊打開原圖">
                                <img src="../images/foyleswarslide__800x600.jpg"
                                    alt="戰地神探宣傳照：一名身穿西裝、頭戴軟呢帽的男子和一名頭髮梳理整齊的女子嚴肅地看著鏡頭" />
                            </a>
                        </div>

                        <div class="carousel-caption">
                            <h2>
                                <a href="https://www.imdb.com/title/tt0310455/"> 戰地神探 </a>
                            </h2>

                            <div>
                                <p>
                                    <span class="contrast">3月8日週日晚上8點，電視上：最終季度的預告大揭密</span>
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="carousel-item" id="carousel-item-5" role="tabpanel" aria-roledescription="slide"
                        aria-label="六之五">
                        <div class="carousel-image">
                            <a href="https://www.w3.org/WAI/content-images/wai-aria-practices/patterns/carousel/examples/images/britcomdavidslide__800x600.jpg" id="carousel-image-5" title="點擊打開原圖">
                                <img src="../images/britcomdavidslide__800x600.jpg"
                                    alt="英國國旗與 WILL-TV 主持人 David Thiel 合影" />
                            </a>
                        </div>

                        <div class="carousel-caption">
                            <h2>
                                <a href="https://news.illinois.edu/on-the-job-david-thiel/"> 誰是 David Thiel </a>
                            </h2>

                            <div></div>
                        </div>
                    </div>

                    <div class="carousel-item" id="carousel-item-6" role="tabpanel" aria-roledescription="slide"
                        aria-label="六之六">
                        <div class="carousel-image">
                            <a href="https://will.illinois.edu/midamericangardener/panelists" id="carousel-image-6">
                                <img src="../images/mag800-2__800x600.jpg" alt="《美國中部園丁》片場嘉賓" />
                            </a>
                        </div>

                        <div class="carousel-caption">
                            <h2>
                                <a href="https://will.illinois.edu/midamericangardener"> 美國中部園丁：每週四晚上7點 </a>
                            </h2>

                            <div class="hidden-xs hidden-sm">
                                <p><span class="contrast">觀看最新的集數</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <script>
        var skip = document.querySelector('.skip-link');
        if (skip) {
            skip.addEventListener('click', function () {
                var target = document.getElementById('mainh1');
                if (!target) return;
                if (!target.hasAttribute('tabindex')) target.setAttribute('tabindex', '-1');
                target.focus({ preventScroll: false });
            });
        }

        /*
         *   File:   carousel-tablist.js
         *
         *   Desc:   Carousel Tablist widget that implements ARIA Authoring Practices
         *
         */

        "use strict";

        // takes options object: { accessibleCaptions: boolean, autoplay: boolean, playButton: boolean }
        // defaults are: { accessibleCaptions: true, autoplay: false, playButton: true }

        var CarouselTablist = function (node, options) {
            // merge passed options with defaults
            options = Object.assign(
                { moreaccessible: false, paused: false, norotate: false },
                options || {}
            );

            // a prefers-reduced-motion user setting must always override autoplay
            var hasReducedMotion = window.matchMedia(
                "(prefers-reduced-motion: reduce)"
            );
            if (hasReducedMotion.matches) {
                options.paused = true;
            }

            /* DOM properties */
            this.domNode = node;

            this.tablistNode = node.querySelector("[role=tablist]");
            this.containerNode = node.querySelector(".carousel-items");

            this.tabNodes = [];
            this.tabpanelNodes = [];

            this.liveRegionNode = node.querySelector(".carousel-items");
            this.pausePlayButtonNode = document.querySelector(
                ".carousel-tablist .controls button.rotation"
            );

            this.playLabel = "自動輪播停止中";
            this.pauseLabel = "自動輪播啟動中";

            this.hasUserActivatedPlay = false; 
            this.isAutoRotationDisabled = options.norotate; 
            this.isPlayingEnabled = !options.paused; 
            this.timeInterval = 5000; 
            this.currentIndex = 0; 
            this.slideTimeout = null; 

            this.tablistNode.addEventListener(
                "focusin",
                this.handleTabFocus.bind(this)
            );
            this.tablistNode.addEventListener(
                "focusout",
                this.handleTabBlur.bind(this)
            );

            var nodes = node.querySelectorAll('[role="tab"]');

            for (var i = 0; i < nodes.length; i++) {
                var n = nodes[i];

                this.tabNodes.push(n);

                n.addEventListener("keydown", this.handleTabKeydown.bind(this));
                n.addEventListener("click", this.handleTabClick.bind(this));

                var tabpanelNode = document.getElementById(
                    n.getAttribute("aria-controls")
                );

                if (tabpanelNode) {
                    this.tabpanelNodes.push(tabpanelNode);

                    tabpanelNode.addEventListener(
                        "focusin",
                        this.handleTabpanelFocusIn.bind(this)
                    );
                    tabpanelNode.addEventListener(
                        "focusout",
                        this.handleTabpanelFocusOut.bind(this)
                    );

                    var imageLink = tabpanelNode.querySelector(".carousel-image a");

                    if (imageLink) {
                        imageLink.addEventListener(
                            "focus",
                            this.handleImageLinkFocus.bind(this)
                        );
                        imageLink.addEventListener(
                            "blur",
                            this.handleImageLinkBlur.bind(this)
                        );
                    }
                } else {
                    this.tabpanelNodes.push(null);
                }
            }

            if (this.pausePlayButtonNode) {
                this.pausePlayButtonNode.addEventListener(
                    "click",
                    this.handlePausePlayButtonClick.bind(this)
                );
            }

            this.domNode.addEventListener(
                "mouseover",
                this.handleMouseOver.bind(this)
            );
            this.domNode.addEventListener(
                "mouseout",
                this.handleMouseOut.bind(this)
            );

            this.enableOrDisableAutoRotation(options.norotate); 
            this.updatePlaying(!options.paused && !options.norotate); 
            this.setAccessibleStyling(options.moreaccessible); 
            this.rotateSlides(); 
        };

        CarouselTablist.prototype.enableOrDisableAutoRotation = function (
            disable
        ) {
            this.isAutoRotationDisabled = disable;
            this.pausePlayButtonNode.hidden = disable;
        };

        CarouselTablist.prototype.setAccessibleStyling = function (accessible) {
            if (accessible) {
                this.domNode.classList.add("carousel-tablist-moreaccessible");
            } else {
                this.domNode.classList.remove("carousel-tablist-moreaccessible");
            }
        };

        CarouselTablist.prototype.hideTabpanel = function (index) {
            var tabNode = this.tabNodes[index];
            var panelNode = this.tabpanelNodes[index];

            tabNode.setAttribute("aria-selected", "false");
            tabNode.setAttribute("tabindex", "-1");

            if (panelNode) {
                panelNode.classList.remove("active");
            }
        };

        CarouselTablist.prototype.showTabpanel = function (index, moveFocus) {
            var tabNode = this.tabNodes[index];
            var panelNode = this.tabpanelNodes[index];

            tabNode.setAttribute("aria-selected", "true");
            tabNode.removeAttribute("tabindex");

            if (panelNode) {
                panelNode.classList.add("active");
            }

            if (moveFocus) {
                tabNode.focus();
            }
        };

        CarouselTablist.prototype.setSelectedTab = function (index, moveFocus) {
            if (index === this.currentIndex) {
                return;
            }
            this.currentIndex = index;

            for (var i = 0; i < this.tabNodes.length; i++) {
                this.hideTabpanel(i);
            }

            this.showTabpanel(index, moveFocus);
        };

        CarouselTablist.prototype.setSelectedToPreviousTab = function (
            moveFocus
        ) {
            var nextIndex = this.currentIndex - 1;

            if (nextIndex < 0) {
                nextIndex = this.tabNodes.length - 1;
            }

            this.setSelectedTab(nextIndex, moveFocus);
        };

        CarouselTablist.prototype.setSelectedToNextTab = function (moveFocus) {
            var nextIndex = this.currentIndex + 1;

            if (nextIndex >= this.tabNodes.length) {
                nextIndex = 0;
            }

            this.setSelectedTab(nextIndex, moveFocus);
        };

        CarouselTablist.prototype.rotateSlides = function () {
            if (!this.isAutoRotationDisabled) {
                if (
                    (!this.hasFocus && !this.hasHover && this.isPlayingEnabled) ||
                    this.hasUserActivatedPlay
                ) {
                    this.setSelectedToNextTab(false);
                }
            }

            this.slideTimeout = setTimeout(
                this.rotateSlides.bind(this),
                this.timeInterval
            );
        };

        CarouselTablist.prototype.updatePlaying = function (play) {
            this.isPlayingEnabled = play;

            if (play) {
                this.pausePlayButtonNode.setAttribute("aria-label", this.pauseLabel);
                this.pausePlayButtonNode.classList.remove("play");
                this.pausePlayButtonNode.classList.add("pause");
                // this.liveRegionNode.setAttribute('aria-live', 'off');
            } else {
                this.pausePlayButtonNode.setAttribute("aria-label", this.playLabel);
                this.pausePlayButtonNode.classList.remove("pause");
                this.pausePlayButtonNode.classList.add("play");
                // this.liveRegionNode.setAttribute('aria-live', 'polite');
            }
        };

        CarouselTablist.prototype.handleImageLinkFocus = function () {
            this.liveRegionNode.classList.add("focus");
        };

        CarouselTablist.prototype.handleImageLinkBlur = function () {
            this.liveRegionNode.classList.remove("focus");
        };

        CarouselTablist.prototype.handleMouseOver = function (event) {
            if (!this.pausePlayButtonNode.contains(event.target)) {
                this.hasHover = true;
            }
        };

        CarouselTablist.prototype.handleMouseOut = function () {
            this.hasHover = false;
        };

        CarouselTablist.prototype.handlePausePlayButtonClick = function () {
            this.hasUserActivatedPlay = !this.isPlayingEnabled;
            this.updatePlaying(!this.isPlayingEnabled);
        };

        CarouselTablist.prototype.handleTabKeydown = function (event) {
            var flag = false;

            switch (event.key) {
                case "ArrowRight":
                    this.setSelectedToNextTab(true);
                    flag = true;
                    break;

                case "ArrowLeft":
                    this.setSelectedToPreviousTab(true);
                    flag = true;
                    break;

                case "Home":
                    this.setSelectedTab(0, true);
                    flag = true;
                    break;

                case "End":
                    this.setSelectedTab(this.tabNodes.length - 1, true);
                    flag = true;
                    break;

                default:
                    break;
            }

            if (flag) {
                event.stopPropagation();
                event.preventDefault();
            }
        };

        CarouselTablist.prototype.handleTabClick = function (event) {
            var index = this.tabNodes.indexOf(event.currentTarget);
            this.setSelectedTab(index, true);
        };

        CarouselTablist.prototype.handleTabFocus = function () {
            this.tablistNode.classList.add("focus");
            // this.liveRegionNode.setAttribute('aria-live', 'polite');
            this.hasFocus = true;
        };

        CarouselTablist.prototype.handleTabBlur = function () {
            this.tablistNode.classList.remove("focus");
            // if (this.playState) {
            //   this.liveRegionNode.setAttribute('aria-live', 'off');
            // }

            this.hasFocus = false;
        };

        CarouselTablist.prototype.handleTabpanelFocusIn = function () {
            this.hasFocus = true;
        };

        CarouselTablist.prototype.handleTabpanelFocusOut = function () {
            this.hasFocus = false;
        };

        window.addEventListener(
            "load",
            function () {
                var carouselEls = document.querySelectorAll(".carousel-tablist");
                var carousels = [];

                var checkboxes = document.querySelectorAll(
                    ".carousel-options input[type=checkbox]"
                );
                var urlParams = new URLSearchParams(location.search);
                var carouselOptions = {};

                checkboxes.forEach(function (checkbox) {
                    var checked = checkbox.checked;

                    if (urlParams.has(checkbox.value)) {
                        var urlParam = urlParams.get(checkbox.value);
                        if (typeof urlParam === "string") {
                            checked = urlParam === "true";
                            checkbox.checked = checked;
                        }
                    }

                    carouselOptions[checkbox.value] = checkbox.checked;
                });

                carouselEls.forEach(function (node) {
                    carousels.push(new CarouselTablist(node, carouselOptions));
                });

                checkboxes.forEach(function (checkbox) {
                    var updateEvent;

                    switch (checkbox.value) {
                        case "moreaccessible":
                            updateEvent = "setAccessibleStyling";
                            break;
                        case "norotate":
                            updateEvent = "enableOrDisableAutoRotation";
                            break;
                    }

                    checkbox.addEventListener("change", function (event) {
                        urlParams.set(event.target.value, event.target.checked + "");
                        window.history.replaceState(
                            null,
                            "",
                            window.location.pathname + "?" + urlParams
                        );

                        if (updateEvent) {
                            carousels.forEach(function (carousel) {
                                carousel[updateEvent](event.target.checked);
                            });
                        }
                    });
                });
            },
            false
        );
    </script>
</body>

</html>